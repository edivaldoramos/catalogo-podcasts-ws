<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="br.com.edivaldorsj.mapper.CriadorTabelasMapper">

    <update id="criarTodasAsTabelas">
        create table if not exists public.podcast
        (
            id           bigserial not null constraint podcast_pk primary key,
            nome         varchar   not null,
            data_criacao timestamp not null,
            descricao    varchar
        );
        alter table public.podcast
            owner to postgres;

        create table if not exists public.integrante
        (
            id      bigserial not null constraint integrante_pk primary key,
            nome    varchar   not null,
            apelido varchar   not null,
            sexo    char      not null
        );
        alter table public.integrante
            owner to postgres;

        create table if not exists public.episodio
        (
            id              bigserial not null constraint episodio_pk primary key,
            podcast_id      bigint    not null constraint episodio_fk references public.podcast,
            sequencia       integer   not null,
            titulo          varchar   not null,
            tema            varchar   not null,
            data_publicacao timestamp not null,
            duracao         integer   not null,
            descricao       varchar
        );
        alter table public.episodio
            owner to postgres;

        create table public.participacao
        (
            episodio_id   bigint not null constraint participacao_episodio_id_fk references public.episodio,
            integrante_id bigint not null constraint participacao_integrante_id_fk references public.integrante,
            constraint participacao_pk primary key (episodio_id, integrante_id)
        );
        alter table public.participacao
            owner to postgres;
    </update>

</mapper>